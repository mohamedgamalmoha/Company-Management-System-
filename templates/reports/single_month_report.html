{% extends "base.html" %}
{% load static %}

{% block title %} {{ title }} {% endblock %}


{% block content %}
<style>
    p {
       padding: 0px;
       margin: 0px;
    };
    label {
       padding: 0px;
       margin: 0px;
    };
</style>
<div id="print-content" style="margin-top:100px; ">
    <table class="table  table-borderless" style="width:65%; align:center; margin: 0 auto; direction: rtl; margin-bottom: 0px;">
        <tbody>
        <tr>
            <td><label>الاسم</label><p>{{ month.worker.name}}</p></td>
            <td><label>الشهر</label><p>{{ month.get_month_arabic}}</p></td>
            <td><label>السنة</label><p>{{ month.year}}</p></td>
        </tr>
        </tbody>
    </table>
    <table class="table table-bordered" style="table-layout:fixed; align:center; margin: 0 auto;  direction: rtl;">
        <tr>
            <th>اليوم</th>
            {% for day in days %}
            <td>{{ day.day_number }}</td>
            {% endfor %}
        </tr>

         <tr>
            <th>الحضور</th>
            {% for day in days %}
            <td>{{ day.get_attendance_arabic }}</td>
            {% endfor %}
        </tr>

         <tr>
            <th>المشروع</th>
            {% for day in days %}
            <td>{{ month.activity }}</td>
            {% endfor %}
        </tr>

        <tr>
            <th>الموقع</th>
            {% for day in days %}
            <td>{{ day.get_location_arabic }}</td>
            {% endfor %}
        </tr>

         <tr>
            <th>ساعات عمل اضافية</th>
            {% for day in days %}
            <td>{{ day.extra_work_hours }}</td>
            {% endfor %}
        </tr>

         <tr>
            <th>الخصم</th>
            {% for day in days %}
            <td>{{ day.deduction }}</td>
            {% endfor %}
        </tr>

         <tr>
            <th>السلف</th>
            {% for day in days %}
            <td>{{ day.loans }}</td>
            {% endfor %}
        </tr>

        <tr>
            <th>المكافئات</th>
            {% for day in days %}
            <td>{{ day.rewards }}</td>
            {% endfor %}
        </tr>
    </table>

<table class="table  table-bordered" style="width:65%; height: 20%; align:center; margin: 0 auto; direction: rtl">
  <tbody>
    <tr>
      <td><label>الراتب الاساسي</label></td>
      <td>{{ month.basic_salary}}</td>
    </tr>
    <tr>
      <td><label>بدل غذاء</label><p>{{ month.feeding_allowance}}</p></td>
      <td><label>بدل سكن</label><p>{{ month.housing_allowance}}</p></td>
      <td><label>بدل انتقال</label><p>{{ month.transporting_allowance}}</p></td>
      <td><label>اجمالي البدالات</label><p>{{ month.get_total_allowance}}</p></td>
    </tr>
    <tr>
      <td><label>اجمالي عدد الساعات الاضافية</label><p>{{ month.total_extra_work_hours}}</p></td>
      <td><label>اجمالي قيمة الساعات الاضافية</label><p>{{ month.total_extra_work_hours_money}}</p></td>
    </tr>
    <tr>
      <td><label>اجمالي الخصومات</label><p>{{ month.total_deduction}}</p></td>
      <td><label>اجمالي المكافئات</label><p>{{ month.total_rewards}}</p></td>
      <td><label>اجمالي السلف</label><p>{{ month.total_loans}}</p></td>
    </tr>
    <tr>
      <td><label>اجمالي ايام الغياب الفعلية</label><p>{{ month.get_total_real_absence_days}}</p></td>
      <td><label>اجمالي ايام الغياب</label><p>{{ month.get_total_absence_days}}</p></td>
    </tr>
    <tr>
      <td><label>عدد ساعات الغياب</label><p>{{ month.total_absence_hours}}</p></td>
      <td><label>اجمالي خصم ساعات الغياب</label><p>{{ month.total_absence_deduction}}</p></td>
    </tr>
    <tr>
      <td><label>اجمالي المرتب</label><p>{{ month.total_salary}}</p></td>
      <td><label>اجمالي الخصم</label><p>{{ month.total_salary_deduction}}</p></td>
      <td><label>صاقي المرتب</label><p>{{ month.net_salary}}</p></td>
    </tr>
  </tbody>
</table>
</div>
<a id="print-btn" class="btn btn-dark btn-lg" style="direction: ltr; display: inline; left: 10px;"> طباعة </a>
{% endblock %}


{% block extra_js %}
<script>
window.onload = function(){
   var btnID = '#print-btn';
   var originalContents = $("body").html();
   var printContents = $('#print-content').html();

   function addPrintEvent(e){
       $("body").html(printContents);
       window.print();
       $("body").html(originalContents);
       $(btnID).on('click', addPrintEvent);
   };

   $(btnID).on('click', addPrintEvent);
};
</script>
{% endblock %}


